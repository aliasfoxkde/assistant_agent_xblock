<div class="voice-assistant-container" id="voice-assistant-container">
    <!-- Main floating button -->
    <div class="voice-assistant-button" id="voice-assistant-button" aria-label="Voice Assistant" style="background-color: {button_color};">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12,14 C14.209,14 16,12.209 16,10 L16,4 C16,1.791 14.209,0 12,0 C9.791,0 8,1.791 8,4 L8,10 C8,12.209 9.791,14 12,14 Z" fill="white"/>
            <path d="M17,11 C17,11.552 17.448,12 18,12 C18.552,12 19,11.552 19,11 L19,10 C19,6.134 15.866,3 12,3 C8.134,3 5,6.134 5,10 L5,11 C5,11.552 5.448,12 6,12 C6.552,12 7,11.552 7,11 L7,10 C7,7.239 9.239,5 12,5 C14.761,5 17,7.239 17,10 L17,11 Z" fill="white"/>
            <path d="M12,16 C8.691,16 6,13.309 6,10 L4,10 C4,14.418 7.582,18 12,18 C16.418,18 20,14.418 20,10 L18,10 C18,13.309 15.309,16 12,16 Z" fill="white"/>
            <path d="M11,20 L13,20 L13,23 C13,23.552 12.552,24 12,24 C11.448,24 11,23.552 11,23 L11,20 Z" fill="white"/>
        </svg>
    </div>

    <!-- Expandable panel -->
    <div class="voice-assistant-panel" id="voice-assistant-panel">
        <div class="panel-header">
            <div class="panel-title">AI Assistant</div>
            <div class="panel-controls">
                <button id="feedback-button" aria-label="Provide Feedback">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20,2 L4,2 C2.9,2 2,2.9 2,4 L2,22 L6,18 L20,18 C21.1,18 22,17.1 22,16 L22,4 C22,2.9 21.1,2 20,2 Z M20,16 L5.17,16 L4,17.17 L4,4 L20,4 L20,16 Z" fill="#6C757D"/>
                        <path d="M11,12 L13,12 L13,14 L11,14 L11,12 Z M11,6 L13,6 L13,10 L11,10 L11,6 Z" fill="#6C757D"/>
                    </svg>
                </button>
                <button id="history-button" aria-label="Conversation History">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13,3 C8.03,3 4,7.03 4,12 L1,12 L4.89,15.89 L4.96,16.03 L9,12 L6,12 C6,8.13 9.13,5 13,5 C16.87,5 20,8.13 20,12 C20,15.87 16.87,19 13,19 C11.07,19 9.32,18.21 8.06,16.94 L6.64,18.36 C8.27,19.99 10.51,21 13,21 C17.97,21 22,16.97 22,12 C22,7.03 17.97,3 13,3 Z M12,8 L12,13 L16.28,15.54 L17,14.33 L13.5,12.25 L13.5,8 L12,8 Z" fill="#6C757D"/>
                    </svg>
                </button>
                <button id="settings-button" aria-label="Settings">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.14,12.94 C19.18,12.64 19.2,12.33 19.2,12 C19.2,11.68 19.18,11.36 19.13,11.06 L21.16,9.48 C21.34,9.34 21.39,9.07 21.28,8.87 L19.36,5.55 C19.24,5.33 18.99,5.26 18.77,5.33 L16.38,6.29 C15.88,5.91 15.35,5.59 14.76,5.35 L14.4,2.81 C14.36,2.57 14.16,2.4 13.92,2.4 L10.08,2.4 C9.84,2.4 9.65,2.57 9.61,2.81 L9.25,5.35 C8.66,5.59 8.12,5.92 7.63,6.29 L5.24,5.33 C5.02,5.25 4.77,5.33 4.65,5.55 L2.74,8.87 C2.62,9.08 2.66,9.34 2.86,9.48 L4.89,11.06 C4.84,11.36 4.8,11.69 4.8,12 C4.8,12.31 4.82,12.64 4.87,12.94 L2.84,14.52 C2.66,14.66 2.61,14.93 2.72,15.13 L4.64,18.45 C4.76,18.67 5.01,18.74 5.23,18.67 L7.62,17.71 C8.12,18.09 8.65,18.41 9.24,18.65 L9.6,21.19 C9.65,21.43 9.84,21.6 10.08,21.6 L13.92,21.6 C14.16,21.6 14.36,21.43 14.39,21.19 L14.75,18.65 C15.34,18.41 15.88,18.09 16.37,17.71 L18.76,18.67 C18.98,18.75 19.23,18.67 19.35,18.45 L21.27,15.13 C21.39,14.91 21.34,14.66 21.15,14.52 L19.14,12.94 Z M12,15.6 C10.02,15.6 8.4,13.98 8.4,12 C8.4,10.02 10.02,8.4 12,8.4 C13.98,8.4 15.6,10.02 15.6,12 C15.6,13.98 13.98,15.6 12,15.6 Z" fill="#6C757D"/>
                    </svg>
                </button>
                <button id="minimize-button" aria-label="Minimize">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19,13H5v-2h14v2z" fill="#6C757D"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="conversation-area" id="conversation-area">
            <div class="welcome-message">
                <h3>How can I help you today?</h3>
                <p>You can ask me questions about course content, get learning assistance, or help navigating the platform.</p>
            </div>
            <!-- Messages will be dynamically inserted here -->
        </div>

        <div class="input-area">
            <input type="text" class="text-input" id="text-input" placeholder="Type your message...">
            <button class="voice-recording-button" id="voice-recording-button" aria-label="Record Voice">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12,14 C14.209,14 16,12.209 16,10 L16,4 C16,1.791 14.209,0 12,0 C9.791,0 8,1.791 8,4 L8,10 C8,12.209 9.791,14 12,14 Z" fill="#6C757D"/>
                    <path d="M17,11 C17,11.552 17.448,12 18,12 C18.552,12 19,11.552 19,11 L19,10 C19,6.134 15.866,3 12,3 C8.134,3 5,6.134 5,10 L5,11 C5,11.552 5.448,12 6,12 C6.552,12 7,11.552 7,11 L7,10 C7,7.239 9.239,5 12,5 C14.761,5 17,7.239 17,10 L17,11 Z" fill="#6C757D"/>
                    <path d="M12,16 C8.691,16 6,13.309 6,10 L4,10 C4,14.418 7.582,18 12,18 C16.418,18 20,14.418 20,10 L18,10 C18,13.309 15.309,16 12,16 Z" fill="#6C757D"/>
                    <path d="M11,20 L13,20 L13,23 C13,23.552 12.552,24 12,24 C11.448,24 11,23.552 11,23 L11,20 Z" fill="#6C757D"/>
                </svg>
            </button>
            <button class="send-button" id="send-button" aria-label="Send Message">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.01,21L23,12L2.01,3L2,10L17,12L2,14L2.01,21Z" fill="#6C757D"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Settings panel (hidden by default) -->
    <div class="settings-panel" id="settings-panel">
        <div class="panel-header">
            <div class="panel-title">Settings</div>
            <button id="close-settings-button" aria-label="Close Settings">
                <i class="fa fa-times" aria-hidden="true"></i>
            </button>
        </div>

        <div class="settings-content">
            <div class="settings-group">
                <h3>Voice Options</h3>

                <div class="settings-item">
                    <label class="settings-label" for="voice-select">Assistant Voice</label>
                    <select id="voice-select" class="settings-select">
                        <option value="alloy">Alloy (Balanced)</option>
                        <option value="echo">Echo (Deeper tone)</option>
                        <option value="fable">Fable (Soft-spoken)</option>
                        <option value="onyx">Onyx (Clear, precise)</option>
                        <option value="nova">Nova (Professional)</option>
                    </select>
                </div>

                <div class="settings-item">
                    <label class="settings-label" for="speaking-rate">Speaking Rate</label>
                    <input type="range" id="speaking-rate" min="0.5" max="2.0" step="0.1" value="1.0">
                    <span class="settings-value" id="speaking-rate-value">1.0</span>
                </div>

                <div class="settings-item">
                    <label class="settings-label" for="volume">Volume</label>
                    <input type="range" id="volume" min="0.1" max="1.0" step="0.1" value="1.0">
                    <span class="settings-value" id="volume-value">1.0</span>
                </div>
            </div>

            <div class="settings-group">
                <h3>Interface Options</h3>

                <div class="settings-item">
                    <label class="settings-label" for="language-select">Language</label>
                    <select id="language-select" class="settings-select">
                        <option value="en-US">English (US)</option>
                        <option value="en-GB">English (UK)</option>
                        <option value="es-ES">Spanish</option>
                        <option value="fr-FR">French</option>
                        <option value="de-DE">German</option>
                    </select>
                </div>
            </div>

            <div class="settings-actions">
                <button id="save-settings-button" class="primary-button">Save Settings</button>
                <button id="reset-settings-button" class="secondary-button">Reset to Default</button>
            </div>
        </div>
    </div>
</div>
